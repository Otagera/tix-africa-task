{"version":3,"file":"RootController.js","sourceRoot":"","sources":["../../src/controllers/RootController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,4CAAqD;AACrD,sDAAgC;AAKhC,IAAM,UAAU,GAAG,kBAAQ,CAAC,KAAK,CAAQ,OAAO,CAAC,CAAC;AAIlD;IAAA;IA6CA,CAAC;IA3CA,oCAAW,GAAX,UAAY,GAAY,EAAE,GAAa;QACtC,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,CAAC,CAAC;IACrD,CAAC;IAED,qCAAY,GAAZ,UAAa,GAAY,EAAE,GAAa;QACvC,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,CAAC,CAAC;IACrD,CAAC;IAED,sCAAa,GAAb,UAAc,GAAY,EAAE,GAAa;QACxC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,CAAC,CAAC;IACtD,CAAC;IAED,wCAAe,GAAf,UAAgB,GAAY,EAAE,GAAa;QAC1C,GAAG,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,CAAC,CAAC;IACzD,CAAC;IAEK,yCAAgB,GAAtB,UAAuB,GAAY,EAAE,GAAa;;;;;;;wBAE3B,qBAAM,UAAU;iCACzB,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC;iCAC5B,IAAI,CAAC,IAAI,CAAC;iCACV,IAAI,EAAE,EAAA;;wBAHZ,UAAe,SAGH;wBACP,OAAO,CAAC,GAAG,CAAC,OAAK,CAAC,WAAW,CAAC,CAAC;wBAC1C,GAAG,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,KAAK,SAAA,EAAE,CAAC,CAAC;;;;wBAEhE,OAAO,CAAC,GAAG,CAAC,OAAK,CAAC,CAAC;wBACnB,GAAG,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,OAAK,EAAE,CAAC,CAAC;;;;;;KAE3B;IAEK,sCAAa,GAAnB,UAAoB,GAAY,EAAE,GAAa;;;;;;;wBAErB,qBAAM,UAAU;iCAC5B,IAAI,EAAE;iCACN,IAAI,CAAC,IAAI,CAAC;iCACV,IAAI,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;iCACxB,IAAI,EAAE,EAAA;;wBAJZ,WAAkB,SAIN;wBAClB,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,MAAM,UAAA,EAAE,CAAC,CAAC;;;;wBAE7D,OAAO,CAAC,GAAG,CAAC,OAAK,CAAC,CAAC;wBACnB,GAAG,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,OAAK,EAAE,CAAC,CAAC;;;;;;KAE3B;IA1CD;QADC,WAAG,CAAC,GAAG,CAAC;;;;qDAGR;IAED;QADC,WAAG,CAAC,aAAa,CAAC;;;;sDAGlB;IAED;QADC,WAAG,CAAC,cAAc,CAAC;;;;uDAGnB;IAED;QADC,WAAG,CAAC,YAAY,CAAC;;;;yDAGjB;IAED;QADC,WAAG,CAAC,sBAAsB,CAAC;;;;0DAa3B;IAED;QADC,WAAG,CAAC,SAAS,CAAC;;;;uDAad;IA5CI,cAAc;QADnB,kBAAU,CAAC,EAAE,CAAC;OACT,cAAc,CA6CnB;IAAD,qBAAC;CAAA,AA7CD,IA6CC","sourcesContent":["import { Request, Response } from 'express';\r\nimport { get, controller } from './decorators/index';\r\nimport mongoose from 'mongoose';\r\nimport {\r\n\tEvent,\r\n} from '../interfaces/index';\r\n\r\nconst EventModel = mongoose.model<Event>('Event');\r\n\r\n\r\n@controller('')\r\nclass RootController {\r\n\t@get('/')\r\n\tgetRootPage(req: Request, res: Response){\r\n\t\tres.render('index', { title: 'Eventing Platform' });\r\n\t}\r\n\t@get('/auth/login')\r\n\tgetLoginPage(req: Request, res: Response){\r\n\t\tres.render('login', { title: 'Eventing Platform' });\r\n\t}\r\n\t@get('/auth/signup')\r\n\tgetSignupPage(req: Request, res: Response){\r\n\t\tres.render('signup', { title: 'Eventing Platform' });\r\n\t}\r\n\t@get('/event/new')\r\n\tgetNewEventPage(req: Request, res: Response){\r\n\t\tres.render('new-event', { title: 'Eventing Platform' });\r\n\t}\r\n\t@get('/event/edit/:eventId')\r\n\tasync getEditEventPage(req: Request, res: Response){\r\n\t\ttry{\r\n\t\t\tconst event: Event = await EventModel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.findById(req.params.eventId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.lean(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.exec();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(event.timeOfEvent);\r\n\t\t\tres.render('edit-event', { title: 'Eventing Platform', event });\r\n\t\t}catch(error){\r\n\t\t\tconsole.log(error);\r\n\t\t\tres.send({error: error });\r\n\t\t}\r\n\t}\r\n\t@get('/events')\r\n\tasync getEventsPage(req: Request, res: Response){\r\n\t\ttry{\r\n\t\t\tconst events: Event[] = await EventModel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.lean(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.sort({ timeOfEvent: 1 })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.exec();\r\n\t\t\tres.render('events', { title: 'Eventing Platform', events });\r\n\t\t}catch(error){\r\n\t\t\tconsole.log(error);\r\n\t\t\tres.send({error: error });\r\n\t\t}\r\n\t}\r\n}"]}