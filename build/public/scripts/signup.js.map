{"version":3,"file":"signup.js","sourceRoot":"","sources":["../../../src/public/scripts/signup.ts"],"names":[],"mappings":"AASA;IAAA;QAAA,iBAkDC;QAjDA,eAAU,GAA8B,EAAE,CAAC;QAC3C,SAAI,GAAY,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QACvD,kBAAa,GAAuC,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC/F,kBAAa,GAAuC,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAE/F,kBAAa,GAAG;YACf,KAAI,CAAC,UAAU,GAAG;gBACjB,QAAQ,EAAE,KAAI,CAAC,aAAa,CAAC,KAAK;gBAClC,QAAQ,EAAE,KAAI,CAAC,aAAa,CAAC,KAAK;aAClC,CAAC;QACH,CAAC,CAAA;QACD,SAAI,GAAG;YACN,KAAI,CAAC,IAAI,IAAI,KAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,UAAC,CAAC;gBACnD,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,IAAG,KAAI,CAAC,aAAa,IAAI,KAAI,CAAC,aAAa,CAAC,KAAK,IAAI,KAAI,CAAC,aAAa,IAAI,KAAI,CAAC,aAAa,CAAC,KAAK,EAAC;oBACnG,KAAI,CAAC,aAAa,EAAE,CAAC;oBACrB,KAAI,CAAC,aAAa,EAAE,CAAC;iBACrB;YACF,CAAC,CAAC,CAAC;QACJ,CAAC,CAAA;QACD,kBAAa,GAAG;YACf,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,KAAI,CAAC,UAAU,CAAC;iBACrC,IAAI,CAAC,UAAA,QAAQ;gBACb,IAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAC;oBACzB,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;oBAC9B,KAAI,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;oBAC7B,KAAI,CAAC,YAAY,EAAE,CAAA;iBACnB;YACF,CAAC,CAAC,CAAC,IAAI,CAAC,UAAA,GAAG;gBACV,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,IAAG,GAAG,CAAC,MAAM,KAAK,GAAG,EAAC;oBACrB,GAAG,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAA;iBACnC;qBAAI;oBACJ,GAAG,GAAG,gCAAgC,CAAC;iBACvC;gBACD,QAAQ,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC;gBAC1D,IAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBACtD,WAAW,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;gBAC3C,WAAW,CAAC,YAAY,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;gBACpD,WAAW,CAAC,YAAY,CAAC,gBAAgB,EAAE,eAAe,CAAC,CAAC;gBAC5D,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBACvC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACpB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBACtC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC;QACL,CAAC,CAAA;QACD,iBAAY,GAAG;YACd,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,aAAa,CAAC;QACtC,CAAC,CAAA;IACF,CAAC;IAAD,aAAC;AAAD,CAAC,AAlDD,IAkDC;AAED,IAAM,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;AAC5B,MAAM,CAAC,IAAI,EAAE,CAAC","sourcesContent":["interface JQuery{\r\n\ttooltip(): void;\r\n\tpopover(): void;\r\n\tmagnificPopup(MagOptions): void;\r\n\tmodal(\r\n\t\tsetting?: string,\r\n\t\toptions?: { [key: string]: string | undefined }\r\n\t): void;\r\n}\r\nclass Signup {\r\n\tsignupData: { [key: string]: string } = {};\r\n\tform: Element = document.querySelector('#signup-form');\r\n\tusernameInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#signup-username');\r\n\tpasswordInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#signup-password');\r\n\t\r\n\tgetSignupData = () =>{\r\n\t\tthis.signupData = {\r\n\t\t\tusername: this.usernameInput.value,\r\n\t\t\tpassword: this.passwordInput.value\r\n\t\t};\t\t\r\n\t}\r\n\tinit = (): void =>{\r\n\t\tthis.form && this.form.addEventListener('submit', (e)=>{\r\n\t\t\te.preventDefault();\r\n\t\t\tif(this.usernameInput && this.usernameInput.value && this.passwordInput && this.passwordInput.value){\r\n\t\t\t\tthis.getSignupData();\r\n\t\t\t\tthis.signupRequest();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tsignupRequest = (): void=>{\r\n\t\t$.post('/auth/signup', this.signupData)\r\n\t\t .done(response=>{\r\n\t\t \tif(response.data.success){\r\n\t\t\t\tthis.usernameInput.value = '';\r\n\t\t\t\tthis.passwordInput.value = '';\r\n\t\t \t\tthis.getLoginPage()\r\n\t\t \t}\r\n\t\t }).fail(err=>{\r\n\t\t \tlet msg = '';\r\n\t\t \tif(err.status === 409){\r\n\t\t \t\tmsg = err.responseJSON.data.message\r\n\t\t \t}else{\r\n\t\t \t\tmsg = \"Something went terrible wrong.\";\r\n\t\t \t}\r\n\t\t \tdocument.querySelector('#signup-err-msg').innerHTML = msg;\r\n\t\t \tconst addModalBtn = document.createElement('button');\r\n\t\t\taddModalBtn.setAttribute('type', 'button');\r\n\t\t\taddModalBtn.setAttribute('data-bs-toggle', 'modal');\r\n\t\t\taddModalBtn.setAttribute('data-bs-target', '#signup-error');\r\n\t\t\tdocument.body.appendChild(addModalBtn);\r\n\t\t\taddModalBtn.click();\r\n\t\t\tdocument.body.removeChild(addModalBtn);\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n\tgetLoginPage = (): void =>{\r\n\t\twindow.location.href = '/auth/login';\r\n\t}\r\n}\r\n\r\nconst signup = new Signup();\r\nsignup.init();\r\n"]}