{"version":3,"file":"edit-event.js","sourceRoot":"","sources":["../../../src/public/scripts/edit-event.ts"],"names":[],"mappings":"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","sourcesContent":["interface JQuery{\r\n\ttooltip(): void;\r\n\tpopover(): void;\r\n\tmagnificPopup(MagOptions): void;\r\n\tmodal(\r\n\t\tsetting?: string,\r\n\t\toptions?: { [key: string]: string | undefined }\r\n\t): void;\r\n}\r\ninterface EventI {\r\n\tname: string;\r\n\teventType: string;\r\n\tcreator: string;\r\n\ttimeOfEvent: string;\r\n}\r\nclass EditEvent {\r\n\t//preserve day selection\r\n\tpreviousDay: number;\r\n\teditEventData: EventI;\r\n\tdateTimeType = 'datetime-local';\r\n\tform: Element = document.querySelector('#edit-event-form');\r\n\teventNameInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#event-name');\r\n\teventCreatorInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#event-creator');\r\n\teventTypeInput: HTMLSelectElement = <HTMLSelectElement>document.querySelector('#event-type');\r\n\teventDateInput: HTMLInputElement = <HTMLInputElement>document.querySelector('#event-date');\r\n\r\n\teventDateStr = new Date(document.querySelector('#event-date-str').innerHTML).toISOString();\r\n\r\n\tnativePicker: HTMLElement = document.querySelector('.nativeDateTimePicker');\r\n\tfallbackPicker: HTMLElement = document.querySelector('.fallbackDateTimePicker');\r\n\tfallbackLabel: HTMLElement = document.querySelector('.fallbackLabel');\r\n\r\n\tyearSelect: HTMLSelectElement = document.querySelector('#year');\r\n\tmonthSelect: HTMLSelectElement = document.querySelector('#month');\r\n\tdaySelect: HTMLSelectElement = document.querySelector('#day');\r\n\thourSelect: HTMLSelectElement = document.querySelector('#hour');\r\n\tminuteSelect: HTMLSelectElement = document.querySelector('#minute');\r\n\r\n\tgeteditEventData = (): void =>{\r\n\t\tconst monthNumber = this.convertMonthToNumber(this.monthSelect.value);\r\n\t\tconst timeOfEvent = (this.dateTimeType === 'datetime-local')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? this.eventDateInput.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `${this.yearSelect.value}-${monthNumber}-${this.daySelect.value}T${this.hourSelect.value}:${this.minuteSelect.value}`\r\n\t\tthis.editEventData = {\r\n\t\t\tname: this.eventNameInput.value,\r\n\t\t\teventType: this.eventTypeInput.value,\r\n\t\t\tcreator: this.eventCreatorInput.value,\r\n\t\t\ttimeOfEvent\r\n\t\t};\r\n\t}\r\n\tinit = (): void =>{\r\n\t\tconst t = this.eventDateStr;\r\n\t\tthis.eventDateInput.value = t.substr(0, 16);\r\n\t\tthis.dateTimePolyFill();\r\n\t\tthis.onFormSubmit();\r\n\t}\r\n\r\n\tonFormSubmit = (): void =>{\r\n\t\tthis.form && this.form.addEventListener('submit', (e)=>{\r\n\t\t\te.preventDefault();\r\n\t\t\tif(this.eventNameInput && this.eventNameInput.value\r\n\t\t\t\t\t&& this.eventTypeInput && this.eventTypeInput.value\r\n\t\t\t\t\t&& this.eventTypeInput && this.eventTypeInput.value\r\n\t\t\t){\r\n\t\t\t\tthis.geteditEventData();\r\n\t\t\t\tthis.editEventRequest();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdateTimePolyFill = (): void =>{\r\n\t\t// hide fallback initially\r\n\t\tthis.fallbackPicker.style.display = 'none';\r\n\t\tthis.fallbackLabel.style.display = 'none';\r\n\r\n\t\t// test whether a new datetime-local input falls back to a text input or not\r\n\t\tconst test = document.createElement('input');\r\n\r\n\t\ttry {\r\n\t\t  test.type = 'datetime-local';\r\n\t\t} catch (e) {\r\n\t\t  console.log(e.description);\r\n\t\t}\r\n\r\n\t\t// if it does, run the code inside the if() {} block\r\n\t\tif(test.type === 'text') {\r\n\t\t\tthis.dateTimeType = 'multiple-select';\r\n\t\t  // hide the native picker and show the fallback\r\n\t\t  this.nativePicker.style.display = 'none';\r\n\t\t  this.fallbackPicker.style.display = 'block';\r\n\t\t  this.fallbackLabel.style.display = 'block';\r\n\r\n\t\t  // populate the days and years dynamically\r\n\t\t  // (the months are always the same, therefore hardcoded)\r\n\t\t  this.populateDays(this.monthSelect.value);\r\n\t\t  this.populateYears();\r\n\t\t  this.populateMonths();\r\n\t\t  this.populateHours();\r\n\t\t  this.populateMinutes();\r\n\t\t}\r\n\r\n\t\t// when the month or year <select> values are changed, rerun this.populateDays()\r\n\t\t// in case the change affected the number of available days\r\n\t\tthis.yearSelect.onchange = ()=> {\r\n\t\t  this.populateDays(this.monthSelect.value);\r\n\t\t}\r\n\r\n\t\tthis.monthSelect.onchange = ()=> {\r\n\t\t  this.populateDays(this.monthSelect.value);\r\n\t\t}\r\n\r\n\t\t// update what day has been set to previously\r\n\t\t// see end of this.populateDays() for usage\r\n\t\tthis.daySelect.onchange = ()=> {\r\n\t\t  this.previousDay = Number.parseInt(this.daySelect.value);\r\n\t\t}\r\n\t}\r\n\tpopulateDays = (month) => {\r\n\t  // delete the current set of <option> elements out of the\r\n\t  // day <select>, ready for the next set to be injected\r\n\t  while(this.daySelect.firstChild){\r\n\t    this.daySelect.removeChild(this.daySelect.firstChild);\r\n\t  }\r\n\r\n\t  // Create variable to hold new number of days to inject\r\n\t  let dayNum;\r\n\r\n\t  // 31 or 30 days?\r\n\t  if(month === 'January' || month === 'March' || month === 'May' || month === 'July' || month === 'August' || month === 'October' || month === 'December') {\r\n\t    dayNum = 31;\r\n\t  } else if(month === 'April' || month === 'June' || month === 'September' || month === 'November') {\r\n\t    dayNum = 30;\r\n\t  } else {\r\n\t  // If month is February, calculate whether it is a leap year or not\r\n\t    let year = Number.parseInt(this.yearSelect.value);\r\n\t    let isLeap = new Date(year, 1, 29).getMonth() == 1;\r\n\t    isLeap ? dayNum = 29 : dayNum = 28;\r\n\t  }\r\n\r\n\t  // inject the right number of new <option> elements into the day <select>\r\n\t  for(let i = 1; i <= dayNum; i++) {\r\n\t    const option = document.createElement('option');\r\n\t    const day = (i < 10)? `0${i}`: `${i}`\r\n\t    option.selected = (this.eventDateStr.substr(8, 2) === day);\r\n\t    option.textContent = day;\r\n\t    this.daySelect.appendChild(option);\r\n\t  }\r\n\r\n\t  // if previous day has already been set, set daySelect's value\r\n\t  // to that day, to avoid the day jumping back to 1 when you\r\n\t  // change the year\r\n\t  if(this.previousDay) {\r\n\t    this.daySelect.value = this.previousDay.toString();\r\n\r\n\t    // If the previous day was set to a high number, say 31, and then\r\n\t    // you chose a month with less total days in it (e.g. February),\r\n\t    // this part of the code ensures that the highest day available\r\n\t    // is selected, rather than showing a blank daySelect\r\n\t    if(this.daySelect.value === \"\") {\r\n\t      this.daySelect.value = `${this.previousDay - 1}`;\r\n\t    }\r\n\r\n\t    if(this.daySelect.value === \"\") {\r\n\t      this.daySelect.value = `${this.previousDay - 2}`;\r\n\t    }\r\n\r\n\t    if(this.daySelect.value === \"\") {\r\n\t      this.daySelect.value = `${this.previousDay - 3}`;\r\n\t    }\r\n\t  }\r\n\t}\r\n\tpopulateMonths = (): void => {\r\n\t\tthis.monthSelect.innerHTML = '';\r\n\t  const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n\t  for(let i = 0; i < months.length; i++) {\r\n\t    const option = document.createElement('option');\r\n\t    option.selected = (this.eventDateStr.substr(5, 2) === (`0${i+1}`));\r\n\t    option.textContent = `${months[i]}`;\r\n\t    this.monthSelect.appendChild(option);\r\n\t  }\r\n\t}\r\n\tpopulateYears = (): void => {\r\n\t  // get this year as a number\r\n\t  const date = new Date();\r\n\t  const year = date.getFullYear();\r\n\r\n\t  // Make this year, and the 100 years before it available in the year <select>\r\n\t  for(let i = 100; i >= -100; i--) {\r\n\t    const option = document.createElement('option');\r\n\t    option.selected = (this.eventDateStr.substr(0, 4) === (`${year-i}`));\r\n\t    option.textContent = `${year-i}`;\r\n\t    this.yearSelect.appendChild(option);\r\n\t  }\r\n\t}\r\n\tpopulateHours = (): void => {\r\n\t  // populate the hours <select> with the 24 hours of the day\r\n\t  for(let i = 0; i <= 23; i++) {\r\n\t    const option = document.createElement('option');\r\n\t    const hour = `${(i < 10) ? (\"0\" + i) : i}`;\r\n\t    option.selected = (this.eventDateStr.substr(11, 2) === hour);\r\n\t    option.textContent = hour;\r\n\t    this.hourSelect.appendChild(option);\r\n\t  }\r\n\t}\r\n\tpopulateMinutes = (): void => {\r\n\t  // populate the minutes <select> with the 60 hours of each minute\r\n\t  for(let i = 0; i <= 59; i++) {\r\n\t    const option = document.createElement('option');\r\n\t    const minute = `${(i < 10) ? (\"0\" + i) : i}`;\r\n\t    option.selected = (this.eventDateStr.substr(14, 2) === minute);\r\n\t    option.textContent = minute;\r\n\t    this.minuteSelect.appendChild(option);\r\n\t  }\r\n\t}\r\n\tconvertMonthToNumber = (month: string): string => {\r\n\t\tconst months = {\r\n\t\t\t'January': '01',\r\n\t\t\t'February': '02',\r\n\t\t\t'March': '03',\r\n\t\t\t'April': '04',\r\n\t\t\t'May': '05',\r\n\t\t\t'June': '06',\r\n\t\t\t'July': '07',\r\n\t\t\t'August': '08',\r\n\t\t\t'September': '09', \r\n\t\t\t'October': '10',\r\n\t\t\t'November': '11',\r\n\t\t\t'December': '12',\r\n\t\t};\r\n\t\treturn months[month];\r\n\t}\r\n\tshowModal = (success: boolean, msg: string): void =>{\r\n\t\tconst addModalBtn = document.createElement('button');\r\n\t\taddModalBtn.setAttribute('type', 'button');\r\n\t\taddModalBtn.setAttribute('data-bs-toggle', 'modal');\r\n\t\taddModalBtn.setAttribute('data-bs-target', '#edit-event-modal');\r\n\t\tdocument.body.appendChild(addModalBtn);\r\n\t\tdocument.querySelector('#edit-event-modal-title').innerHTML = success? 'Success': 'Failure';\r\n\t\tdocument.querySelector('#edit-event-modal-body').innerHTML = msg;\r\n\t\taddModalBtn.click();\r\n\t\tdocument.body.removeChild(addModalBtn);\r\n\t}\r\n\r\n\teditEventRequest = (): void =>{\r\n\t\t$.ajax(`/api/event/edit/${window.location.pathname.split('/')[3]}`, {\r\n\t\t\tdata: this.editEventData,\r\n\t\t\tmethod: 'PUT'\r\n\t\t})\r\n\t\t .done(response=>{\r\n\t\t \tif(response.statusCode === 200){\r\n\t\t \t\tthis.showModal(true, response.data.message);\r\n\t\t \t}\r\n\t\t }).fail(err=>{\r\n\t \t\tthis.showModal(false, 'Something went wrong');\r\n\t\t \tconsole.log(err);\r\n\t\t });\r\n\t}\r\n}\r\n\r\nconst editEvent = new EditEvent();\r\neditEvent.init();"]}